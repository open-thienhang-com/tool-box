"use strict";(self.webpackChunktool_box=self.webpackChunktool_box||[]).push([[788],{5788:(lt,U,C)=>{C.r(U),C.d(U,{QrScannerComponent:()=>Tt});var _=C(3301),b=C(467),c=C(4438),dt=C(1413);class w extends dt.B{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(a){const{hasError:e,_hasValue:s,_value:i,thrownError:n,isStopped:o,_isComplete:l}=this;e?a.error(n):(o||l)&&(s&&a.next(i),a.complete())}next(a){this.isStopped||(this._value=a,this._hasValue=!0)}complete(){const{_hasValue:a,_value:e,_isComplete:s}=this;s||(this._isComplete=!0,a&&super.next(e),super.complete())}}var R=C(4412);const M=["video"],ht=["canvas"],At=["resultsPanel"],j="assets/wasm/index.js",k="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.9/wasm/index.js",Z={audio:!1,video:!0},q={lineWidth:1,strokeStyle:"green",fillStyle:"#55f02880"},G={font:"15px serif",strokeStyle:"#fff0",fillStyle:"#ff0000"},S={src:"",fps:30,vibrate:300,decode:"utf-8",isBeep:!0,constraints:Z,canvasStyles:[q,G]};var L=()=>"zbarWasm"in window;const A=(t,a,e)=>{e?t.error(e):t.next(a),t.complete()},H=(t=!1)=>{if(!1===t)return;const a=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");a.oncanplaythrough=()=>{const e=a.play();e&&e.catch(s=>{})}},tt=(t,a,e,s)=>{let i,n,o=a.width,l=a.height,d=o/l,r=parseInt(getComputedStyle(a).width),h=parseInt(getComputedStyle(a).height),v=r/h;e.innerHTML="",d>v?(i=r/o,n=r/d/l):(n=h/l,i=h*d/o);for(let x=0;x<t.length;x++){const E=t[x];let g=document.createElement("canvas"),F=g.getContext("2d",{willReadFrequently:!0}),O={},D=[],f=[],p=0,m=0,z=2===s.length&&s[1]?.font?.replace(/[^0-9]/g,"");z&&/[0-9]/g.test(z)&&(p=parseFloat(z),m=(i||1)*p,Number.isNaN(m)&&(m=p));const W=E.points;for(let u=0;u<W.length;u++){const B=W?.[u]?.x??0,y=W?.[u]?.y??0;O[`x${u+1}`]=B,O[`y${u+1}`]=y,D.push(B),f.push(y)}let $=Math.max(...D),N=Math.min(...D),X=Math.max(...f),T=Math.min(...f);g.setAttribute("class","qrcode-polygon"),d>v?(g.style.top=T*n+.5*(h-r/d)+"px",g.style.left=N*i+"px",g.width=($-N)*i,g.height=(X-T)*i):(g.style.top=T*n+"px",g.style.left=N*i+.5*(r-h*d)+"px",g.width=($-N)*n,g.height=(X-T)*n);for(const u in s[0])F[u]=s[0][u];const K=[];for(let u=0;u<D.length;u++)K.push((O[`x${u+1}`]-N)*n),K.push((O[`y${u+1}`]-T)*i);const P=K.slice(0);for(F.beginPath(),F.moveTo(P.shift(),P.shift());P.length;)F.lineTo(P.shift(),P.shift());if(F.closePath(),F.fill(),F.stroke(),p){const u=document.createElement("div");u.setAttribute("class","qrcode-tooltip-temp"),u.innerText=E.value,u.style.maxWidth=(o>window.innerWidth?.9*window.innerWidth:o)+"px",u.style.borderRadius=`clamp(1px, ${i*p-10}px, 3px)`,u.style.paddingBlock=`clamp(1px, ${i*p-10}px, 3px)`,u.style.paddingInline=`clamp(2.5px, ${i*p-6}px, 10px)`;const B=`<svg xmlns="http://www.w3.org/2000/svg" width="${m}" height="${m}" viewBox="0 0 512 512"><rect x="128" y="128" width="336" height="336" rx="57" ry="57"></rect><path d="M383.5,128l.5-24a56.16,56.16,0,0,0-56-56H112a64.19,64.19,0,0,0-64,64V328a56.16,56.16,0,0,0,56,56h24"></path></svg>`,y=(new DOMParser).parseFromString(B,"application/xml"),J=u.ownerDocument.importNode(y.documentElement,!0);J.style.marginLeft=`clamp(1px, ${i*p-10}px, 3px)`,u.appendChild(J),J.addEventListener("click",()=>window.navigator.clipboard.writeText(E.value)),u.addEventListener("click",()=>window.navigator.clipboard.writeText(E.value));const I=document.createElement("div");I.setAttribute("class","qrcode-tooltip"),I.appendChild(u),n=h/l,i=h*d/o,I.style.fontSize=i*p+"px",I.style.top=T*n+"px",I.style.left=N*i+.5*(r-h*d)+"px",I.style.width=($-N)*n+"px",I.style.height=(X-T)*n+"px";const V=document.createElement("span");V.innerText=E.value,V.style.top=T*n+-20*n+"px",V.style.left=N*i+.5*(r-h*d)+"px";const It=s[1]?.font?.split(" ")?.[1];V.style.fontFamily=It,V.style.fontSize=i*p+"px",V.style.color=s?.[1]?.fillStyle,e?.appendChild(I),e?.appendChild(V)}e?.appendChild(g)}},et=(t,a)=>new Promise((e,s)=>t.toBlob(i=>e(i),a)),st=(t=[],a,e,s,i=new w)=>(it(t,e,s).then(n=>{Promise.all(Object.assign([],n).map(o=>((t,a)=>{let e=a?.decode??S.decode,s=2===a?.canvasStyles?.length?a?.canvasStyles:[q,G],i=a?.isBeep??S.isBeep;return new Promise((n,o)=>{const l=new FileReader;l.onload=()=>{const d={name:t.name,file:t,url:URL.createObjectURL(t)},r=new Image;r.setAttribute("crossOrigin","anonymous"),r.onload=(0,b.A)(function*(){const h=document.createElement("canvas");h.width=r.naturalWidth||r.width,h.height=r.naturalHeight||r.height;const v=h.getContext("2d");v.drawImage(r,0,0,h.width,h.height);const x=v.getImageData(0,0,h.width,h.height);if(L()){const E=yield zbarWasm.scanImageData(x);if(E?.length){E.forEach(D=>D.value=D.decode(e?.toLocaleLowerCase())),((t,a,e)=>{let s=a.getContext("2d",{willReadFrequently:!0});for(let i=0;i<t.length;i++){const n=t[i];let o={},l=[],d=[],r=0,v=e[1]?.font?.split(" ")?.[0]?.replace(/[^0-9]/g,"");v&&/[0-9]/g.test(v)&&(r=parseFloat(v));const x=n.points;for(let f=0;f<x.length;f++){const p=x?.[f]?.x??0,m=x?.[f]?.y??0;o[`x${f+1}`]=p,o[`y${f+1}`]=m,l.push(p),d.push(m)}let E=Math.min(...l),g=Math.min(...d);const F=()=>{for(const m in e[0])s[m]=e[0][m];const f=[];for(let m=0;m<l.length;m++)f.push(o[`x${m+1}`]),f.push(o[`y${m+1}`]);const p=f.slice(0);for(s.beginPath(),s.moveTo(p.shift(),p.shift());p.length;)s.lineTo(p.shift(),p.shift());s.closePath(),s.fill(),s.stroke()};let O=document.createElement("canvas");const D=()=>{const f=e[1]?.font?.split(" ")?.[1];O.height=a.height,O.width=a.width;let p=O.getContext("2d",{willReadFrequently:!0});p.font=r+"px "+f;for(const m in e[1])p[m]=e[1][m];Et(p,n.value,E,g-5)};F(),D(),s.drawImage(O,0,0)}})(E,h,s);const g=yield et(h),F=URL.createObjectURL(g);n(Object.assign({},d,{data:E,url:F,canvas:h,file:(D=g,f=d.name,new File([D],f,{lastModified:(new Date).getTime(),type:D.type}))})),H(i)}else n(Object.assign({},d,{data:E,canvas:h}))}var D,f}),r.src=d.url},l.onerror=d=>o(d),l.readAsDataURL(t)})})(o,a))).then(o=>{A(i,o)}).catch(o=>A(i,null,o))}),i),Et=(t,a,e,s)=>{let i=1.2*t.measureText("M").width,n=a.split("\n");for(var o=0;o<n.length;++o)t.fillText(n[o],e,s),t.strokeText(n[o],e,s),s+=i},it=(t=[],a=100,e=100)=>{if(t.length&&(a<100||e<100)){const s=[];return new Promise((i,n)=>{for(const o of t){const l=new Image,d=new FileReader;d.onload=function(r){l.onload=function(){const h=document.createElement("canvas"),v=h.getContext("2d"),x=Math.round(l.width*(a/100)),E=Math.round(l.height*(a/100));h.width=x,h.height=E,v.drawImage(l,0,0,x,E),h.toBlob(g=>{const F=new File([g],o.name,{type:o.type});s.push(F),t.length===s.length&&i(s)},o.type,e/100)},l.src=r.target.result},d.onerror=r=>n(r),d.readAsDataURL(o)}})}return Promise.resolve(t)},nt=t=>{Object.assign([],t.childNodes).forEach(a=>t.removeChild(a))},Q=(t,a)=>{t.style.width=a.offsetWidth+"px",t.style.height=a.offsetHeight+"px"},at=(t=300)=>{t&&wt()&&window?.navigator?.vibrate(t)},wt=()=>{const t=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4))||/^((?!chrome|android).)*safari/i.test(t))};let ot=(()=>{class t{loadFiles(e=[],s,i){const n=new w;return it(e,s,i).then(o=>{Promise.all(Object.assign([],o).map(l=>this.readAsDataURL(l))).then(l=>A(n,l)).catch(l=>A(n,null,l))}),n}loadFilesToScan(e=[],s,i,n){return st(e,s,i,n)}readAsDataURL(e){return new Promise((s,i)=>{const n=new FileReader;n.onload=()=>{const o={name:e.name,file:e,url:URL.createObjectURL(e)};s(o)},n.onerror=o=>i(o),n.readAsDataURL(e)})}static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275prov=c.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xt=(()=>{class t{constructor(e,s){this.renderer=e,this.elementRef=s,this.event=new c.bkB,this.src=S.src,this.fps=S.fps,this.vibrate=S.vibrate,this.decode=S.decode,this.isBeep=S.isBeep,this.config=S,this.constraints=S.constraints,this.canvasStyles=[q,G],this.isStart=!1,this.isPause=!1,this.isLoading=!1,this.isTorch=!1,this.data=new R.t([]),this.devices=new R.t([]),this.deviceIndexActive=0,this.dataForResize=[],this.ready=new w,this.STATUS={startON:()=>this.isStart=!0,pauseON:()=>this.isPause=!0,loadingON:()=>this.isLoading=!0,startOFF:()=>this.isStart=!1,pauseOFF:()=>this.isPause=!1,loadingOFF:()=>this.isLoading=!1,torchOFF:()=>this.isTorch=!1}}ngOnInit(){this.overrideConfig(),((t=new w,a)=>{let e=0;const s=(i=!1)=>{const n=()=>{let d;try{const r=()=>{clearTimeout(d),L()?setTimeout(()=>A(t,!0)):d=setTimeout(()=>r())};setTimeout(()=>r()),setTimeout(()=>clearTimeout(d),3e3)}catch{clearTimeout(d)}},o=document.querySelectorAll(`script[src="${k}"]`),l=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js"]');if(o.length||l.length)n();else{const d=document.querySelectorAll(`script[src="${j}"]`);if(1===d.length)n();else if(d.forEach(r=>r.remove()),a){const r=a.createElement("script");a.setAttribute(r,"src",i?k:j),a.setAttribute(r,"type","text/javascript"),a.setAttribute(r,"async",""),a.appendChild(document.head,r),r.onload=()=>n(),r.onerror=()=>{e<2?(document.head.removeChild(r),s(!0)):A(t,!1,k)},e+=1}else{const r=document.createElement("script");r.setAttribute("src",i?k:j),r.setAttribute("type","text/javascript"),r.setAttribute("async",""),document.head.appendChild(r),r.onload=()=>n(),r.onerror=()=>{e<2?(document.head.removeChild(r),s(!0)):A(t,!1,k)},e+=1}}};return s(),t})(this.ready,this.renderer).subscribe(()=>{this.src&&this.loadImage(this.src),this.resize()})}start(e){const s=new w;return this.isStart?A(s,!1):this.safariWebRTC(s,e),s}stop(){this.STATUS.pauseOFF(),this.STATUS.startOFF(),this.STATUS.torchOFF(),this.STATUS.loadingOFF();const e=new w;try{clearTimeout(this.rAF_ID),this.video.nativeElement.srcObject.getTracks().forEach(s=>{s.stop(),A(e,!0)}),this.dataForResize=[],(t=>{t.getContext("2d",{willReadFrequently:!0}).clearRect(0,0,t.width,t.height)})(this.canvas.nativeElement),nt(this.resultsPanel.nativeElement)}catch(s){A(e,!1,s)}return e}play(){const e=new w;return this.isPause?(this.video.nativeElement.play(),this.STATUS.pauseOFF(),this.requestAnimationFrame(),A(e,!0)):A(e,!1),e}pause(){const e=new w;return this.isStart?(clearTimeout(this.rAF_ID),this.video.nativeElement.pause(),this.STATUS.pauseON(),A(e,!0)):A(e,!1),e}playDevice(e,s=new w){const i=this.getConstraints();switch(!0){case"null"===e||"undefined"===e||!e:stop(),this.stop(),A(s,!1);break;case e&&(!this.isStart||!i||i.deviceId!==e):stop(),this.stop(),this.STATUS.loadingON(),this.deviceIndexActive=this.devices.value.findIndex(l=>l.deviceId===e);const o={...this.constraints,audio:!1,video:{deviceId:e,...this.constraints.video}};navigator.mediaDevices.getUserMedia(o).then(l=>{this.video.nativeElement.srcObject=l,this.video.nativeElement.onloadedmetadata=()=>{this.video.nativeElement.play(),this.requestAnimationFrame(),A(s,!0),this.STATUS.startON(),this.STATUS.loadingOFF()}}).catch(l=>{this.eventEmit(!1),A(s,!1,l),this.STATUS.startOFF(),this.STATUS.loadingOFF()});break;default:A(s,!1),this.STATUS.loadingOFF()}return s}loadImage(e){const s=new w;this.STATUS.startOFF(),this.STATUS.loadingON();const i=new Image;return i.setAttribute("crossOrigin","anonymous"),i.onload=()=>{L()&&this.drawImage(i,n=>{A(s,n),this.STATUS.startOFF(),this.STATUS.loadingOFF()})},i.src=e,s}torcher(){const e=this.applyConstraints({advanced:[{torch:this.isTorch}]});return e.subscribe(()=>!1,()=>this.isTorch=!this.isTorch),e}applyConstraints(e,s=0){var i=this;const n=new w;if(this.isStart){const o=this.video.nativeElement.srcObject;if(null===s&&void 0===s&&Number.isNaN(s))A(n,!1,"Please check again deviceIndex");else{const l=o.getVideoTracks()[s];new window.ImageCapture(l).getPhotoCapabilities().then((0,b.A)(function*(){yield l.applyConstraints(e),Q(i.video.nativeElement,i.canvas.nativeElement),A(n,!0)})).catch(r=>{switch(r?.name){case"NotFoundError":case"DevicesNotFoundError":A(n,!1,"Required track is missing");break;case"NotReadableError":case"TrackStartError":A(n,!1,"Webcam or mic are already in use");break;case"OverconstrainedError":case"ConstraintNotSatisfiedError":A(n,!1,"Constraints can not be satisfied by avb. devices");break;case"NotAllowedError":case"PermissionDeniedError":A(n,!1,"Permission denied in browser");break;case"TypeError":A(n,!1,"Empty constraints object");break;default:A(n,!1,r)}})}}else A(n,!1,"Please start the scanner");return n}getConstraints(e=0){return this.video.nativeElement.srcObject?.getVideoTracks()[e]?.getConstraints()}download(e=`ngx_scanner_qrcode_${Date.now()}.png`,s,i){var n=this;const o=new w;return(0,b.A)(function*(){const d=((t,a)=>new File([t],a,{lastModified:(new Date).getTime(),type:t.type}))(yield et(n.canvas.nativeElement),e);st([d],n.config,s,i,o).subscribe(r=>{r.forEach(h=>{if(h?.data?.length){const v=document.createElement("a");v.href=h.url,v.download=h.name,v.click(),v.remove()}})})})(),o}resize(){window.addEventListener("resize",()=>{tt(this.dataForResize,this.canvas.nativeElement,this.resultsPanel.nativeElement,this.canvasStyles),Q(this.video.nativeElement,this.canvas.nativeElement)})}overrideConfig(){"src"in this.config&&(this.src=this.config.src),"fps"in this.config&&(this.fps=this.config.fps),"vibrate"in this.config&&(this.vibrate=this.config.vibrate),"decode"in this.config&&(this.decode=this.config.decode),"isBeep"in this.config&&(this.isBeep=this.config.isBeep),"constraints"in this.config&&(this.constraints=((t,a,e)=>{if(a&&Object.keys(a[t]).length){for(const s in e){const i=JSON.parse(JSON.stringify({...a[t],[s]:e[s]}));a[t]=a[t].hasOwnProperty(s)?a[t]:i}return a[t]}return e})("constraints",this.config,Z)),"canvasStyles"in this.config&&2===this.config?.canvasStyles?.length&&(this.canvasStyles=this.config.canvasStyles)}safariWebRTC(e,s){this.STATUS.startOFF(),this.STATUS.loadingON(),navigator.mediaDevices.getUserMedia(this.constraints).then(i=>{i.getTracks().forEach(n=>n.stop()),this.loadAllDevices(e,s)}).catch(i=>{A(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}loadAllDevices(e,s){navigator.mediaDevices.enumerateDevices().then(i=>{let n=i.filter(o=>"videoinput"==o.kind);this.devices.next(n),n?.length>0?(A(e,n),s?s(n):this.playDevice(n[0].deviceId)):(A(e,!1,"No camera detected."),this.STATUS.startOFF(),this.STATUS.loadingOFF())}).catch(i=>{A(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}drawImage(e,s=(()=>{})){var i=this;return(0,b.A)(function*(){const n=i.canvas.nativeElement,o=n.getContext("2d",{willReadFrequently:!0});e instanceof HTMLImageElement&&(n.width=e.naturalWidth,n.height=e.naturalHeight,e.style.visibility="",i.video.nativeElement.style.visibility="hidden",i.renderer.setStyle(i.elementRef.nativeElement,"width",n.width+"px"),i.renderer.setStyle(i.elementRef.nativeElement,"maxWidth","100%"),i.renderer.setStyle(i.elementRef.nativeElement,"display","inline-block")),e instanceof HTMLVideoElement&&(n.width=e.videoWidth,n.height=e.videoHeight,e.style.visibility="",i.canvas.nativeElement.style.visibility="hidden"),Q(i.video.nativeElement,n),o.clearRect(0,0,n.width,n.height),o.drawImage(e,0,0,n.width,n.height);const l=o.getImageData(0,0,n.width,n.height),d=yield zbarWasm.scanImageData(l);if(d?.length){d.forEach(h=>h.value=h.decode(i.decode?.toLocaleLowerCase())),tt(d,Object.freeze(i.canvas.nativeElement),i.resultsPanel.nativeElement,i.canvasStyles);const r=()=>{i.eventEmit(d),i.dataForResize=d};e instanceof HTMLImageElement&&(s(!0),r(),at(i.vibrate),H(i.isBeep)),e instanceof HTMLVideoElement&&(r(),at(i.vibrate),H(i.isBeep))}else s(!1),nt(i.resultsPanel.nativeElement),i.dataForResize=[]})()}eventEmit(e=!1){!1!==e&&this.data.next(e||[]),!1!==e&&this.event.emit(e||[])}requestAnimationFrame(e=100){try{clearTimeout(this.rAF_ID),this.rAF_ID=setTimeout(()=>{this.video.nativeElement.readyState===this.video.nativeElement.HAVE_ENOUGH_DATA&&(e=0,L()&&this.drawImage(this.video.nativeElement),this.isStart&&!this.isPause&&this.requestAnimationFrame(e))},e||this.fps)}catch{clearTimeout(this.rAF_ID)}}get isReady(){return this.ready}ngOnDestroy(){this.pause()}static#t=this.\u0275fac=function(s){return new(s||t)(c.rXU(c.sFG),c.rXU(c.aKT))};static#e=this.\u0275cmp=c.VBU({type:t,selectors:[["ngx-scanner-qrcode"]],viewQuery:function(s,i){if(1&s&&(c.GBs(M,5),c.GBs(ht,5),c.GBs(At,5)),2&s){let n;c.mGM(n=c.lsd())&&(i.video=n.first),c.mGM(n=c.lsd())&&(i.canvas=n.first),c.mGM(n=c.lsd())&&(i.resultsPanel=n.first)}},hostAttrs:[1,"ngx-scanner-qrcode"],inputs:{src:"src",fps:"fps",vibrate:"vibrate",decode:"decode",isBeep:"isBeep",config:"config",constraints:"constraints",canvasStyles:"canvasStyles"},outputs:{event:"event"},exportAs:["scanner"],decls:6,vars:0,consts:[["resultsPanel",""],["canvas",""],["video",""],[1,"origin-overlay"],[1,"origin-canvas"],["playsinline","",1,"origin-video"]],template:function(s,i){1&s&&c.nrm(0,"div",3,0)(2,"canvas",4,1)(4,"video",5,2)},styles:[".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp svg:active path{stroke:#afafaf}\n"],encapsulation:2})}return t})(),St=(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275mod=c.$C({type:t});static#s=this.\u0275inj=c.G2t({providers:[ot]})}return t})();function Nt(t,a){if(1&t&&c.nrm(0,"ngx-scanner-qrcode",9,1),2&t){const e=a.$implicit,s=c.XpG();c.Y8G("src",e.url)("config",s.config)}}let Tt=(()=>{class t{constructor(e){this.qrcode=e,this.percentage=80,this.quality=100,this.qrCodeResult=[],this.config={isBeep:!1,constraints:{video:{width:window.innerWidth}}}}openCamera(e,s){"start"===s?e[s](n=>{const o=n.find(l=>/back|rear|environment/gi.test(l.label));e.playDevice(o?o.deviceId:n[0].deviceId)}).subscribe(n=>console.log(s,n),alert):e[s]().subscribe(n=>console.log(s,n),alert)}onSelects(e){this.qrcode.loadFiles(e,this.percentage,this.quality).subscribe(s=>{this.qrCodeResult=s})}static#t=this.\u0275fac=function(s){return new(s||t)(c.rXU(ot))};static#e=this.\u0275cmp=c.VBU({type:t,selectors:[["app-qr-scanner"]],standalone:!0,features:[c.aNF],decls:14,vars:2,consts:[["file",""],["actionFile","scanner"],["header","QR Scanner","description","Scan QR Code"],[1,"row"],[1,"col-12","d-flex","justify-content-center","align-items-center"],[1,"btn","btn-primary"],[1,"mx-2"],["type","file",1,"btn","btn-primary",3,"change","multiple","accept"],[1,"col-12","text-center"],[3,"src","config"]],template:function(s,i){if(1&s){const n=c.RV6();c.nrm(0,"app-page-header",2),c.j41(1,"div",3)(2,"div",4)(3,"div")(4,"button",5),c.EFF(5,"Open Camera"),c.k0s()(),c.j41(6,"span",6),c.EFF(7,"or"),c.k0s(),c.j41(8,"div")(9,"input",7,0),c.bIt("change",function(){c.eBV(n);const l=c.sdS(10);return c.Njj(i.onSelects(l.files))}),c.k0s()()(),c.j41(11,"div",8),c.Z7z(12,Nt,2,2,"ngx-scanner-qrcode",9,c.fX1),c.k0s()()}2&s&&(c.R7$(9),c.Y8G("multiple","multiple")("accept",".jpg, .png, .gif, .jpeg"),c.R7$(3),c.Dyx(i.qrCodeResult))},dependencies:[_.y,St,xt]})}return t})()},3301:(lt,U,C)=>{C.d(U,{y:()=>b});var _=C(4438);let b=(()=>{class c{constructor(){this.header="",this.description=""}static#t=this.\u0275fac=function(R){return new(R||c)};static#e=this.\u0275cmp=_.VBU({type:c,selectors:[["app-page-header"]],inputs:{header:"header",description:"description"},standalone:!0,features:[_.aNF],decls:5,vars:2,consts:[[1,"mb-0"],[1,"my-1"],[1,"text-muted"]],template:function(R,M){1&R&&(_.j41(0,"h1",0),_.EFF(1),_.k0s(),_.nrm(2,"hr",1),_.j41(3,"small",2),_.EFF(4),_.k0s()),2&R&&(_.R7$(),_.JRh(M.header),_.R7$(3),_.JRh(M.description))}})}return c})()}}]);